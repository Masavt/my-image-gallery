// ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚·ã‚¹ãƒ†ãƒ 
const storyTemplates = {
    "ç¦æ–­ã®é–¢ä¿‚": {
        scenes: [
            { type: "introduction", mood: "mysterious", text: "é‹å‘½ã®å‡ºä¼šã„" },
            { type: "tension", mood: "intense", text: "æŠ—ãˆãªã„è¡å‹•" },
            { type: "climax", mood: "passionate", text: "ç§˜å¯†ã®æ™‚é–“" },
            { type: "ending", mood: "bittersweet", text: "æ–°ãŸãªé–¢ä¿‚æ€§" }
        ]
    },
    "æ”¯é…ã¨æœå¾“": {
        scenes: [
            { type: "setup", mood: "dominant", text: "å¥‘ç´„ã®å§‹ã¾ã‚Š" },
            { type: "training", mood: "strict", text: "æ–°ã—ã„ä¸–ç•Œã¸ã®å°ã" },
            { type: "resistance", mood: "conflicted", text: "å¿ƒã®è‘›è—¤" },
            { type: "acceptance", mood: "submissive", text: "çœŸã®è§£æ”¾" }
        ]
    }
};

// ç”»åƒè‡ªå‹•ãƒãƒƒãƒãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ 
class ImageMatcher {
    constructor() {
        this.imageDatabase = [];
    }
    
    findImageForScene(scene) {
        // ã‚·ãƒ¼ãƒ³ã®ãƒ ãƒ¼ãƒ‰ã‚„ã‚¿ã‚¤ãƒ—ã«åŸºã¥ã„ã¦é©åˆ‡ãªç”»åƒã‚’é¸æŠ
        return this.imageDatabase.filter(img => 
            img.mood === scene.mood && 
            img.type === scene.type
        );
    }
}
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forbidden Stories - AIè‡ªå‹•ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ç”Ÿæˆ</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            background: #1a1a1a;
            color: #fff;
            font-family: 'Georgia', serif;
            line-height: 1.6;
        }
        .header {
            background: linear-gradient(135deg, #8B0000 0%, #000000 100%);
            padding: 30px;
            text-align: center;
            border-bottom: 2px solid #8B0000;
        }
        .header h1 {
            font-size: 3em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
            letter-spacing: 3px;
        }
        .tagline {
            font-style: italic;
            opacity: 0.8;
            margin-top: 10px;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        
        /* ã‚¸ãƒ£ãƒ³ãƒ«é¸æŠ */
        .genre-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        .genre-card {
            background: #2a2a2a;
            border: 1px solid #8B0000;
            border-radius: 10px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }
        .genre-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(139, 0, 0, 0.5);
        }
        .genre-card.selected {
            background: #8B0000;
        }
        .genre-icon {
            font-size: 3em;
            margin-bottom: 10px;
        }
        
        /* ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã‚ªãƒ—ã‚·ãƒ§ãƒ³ */
        .customization {
            background: #2a2a2a;
            border-radius: 10px;
            padding: 30px;
            margin-bottom: 30px;
        }
        .slider-group {
            margin: 20px 0;
        }
        .slider-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        .slider {
            width: 100%;
            height: 10px;
            border-radius: 5px;
            background: #444;
            outline: none;
            -webkit-appearance: none;
        }
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background: #8B0000;
            cursor: pointer;
        }
        
        /* ç”Ÿæˆãƒœã‚¿ãƒ³ */
        .generate-btn {
            background: linear-gradient(135deg, #8B0000 0%, #DC143C 100%);
            color: white;
            border: none;
            padding: 20px 60px;
            font-size: 1.2em;
            border-radius: 50px;
            cursor: pointer;
            display: block;
            margin: 40px auto;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        .generate-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(220, 20, 60, 0.5);
        }
        
        /* ã‚¹ãƒˆãƒ¼ãƒªãƒ¼è¡¨ç¤º */
        .story-viewer {
            background: #000;
            border-radius: 10px;
            padding: 20px;
            margin-top: 40px;
            display: none;
        }
        .story-viewer.active {
            display: block;
        }
        .scene {
            margin-bottom: 40px;
            opacity: 0;
            animation: fadeIn 1s forwards;
        }
        @keyframes fadeIn {
            to { opacity: 1; }
        }
        .scene-image {
            width: 100%;
            max-width: 800px;
            height: 400px;
            object-fit: cover;
            border-radius: 10px;
            margin: 0 auto 20px;
            display: block;
            filter: contrast(1.1) saturate(0.9);
        }
        .scene-text {
            max-width: 800px;
            margin: 0 auto;
            font-size: 1.2em;
            line-height: 1.8;
            text-align: justify;
            padding: 20px;
            background: rgba(139, 0, 0, 0.1);
            border-left: 3px solid #8B0000;
        }
        .scene-number {
            color: #8B0000;
            font-size: 0.9em;
            margin-bottom: 10px;
        }
        
        /* ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ */
        .loading {
            text-align: center;
            padding: 40px;
            display: none;
        }
        .loading.active {
            display: block;
        }
        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #8B0000;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* è­¦å‘Šè¡¨ç¤º */
        .warning {
            background: #8B0000;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 30px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Forbidden Stories</h1>
        <p class="tagline">AIãŒç´¡ãã€ã‚ãªãŸã ã‘ã®å®˜èƒ½çš„ãªç‰©èª</p>
    </div>

    <div class="container">
        <div class="warning">
            âš ï¸ ã“ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯18æ­³ä»¥ä¸Šã®æ–¹ã®ã¿å¯¾è±¡ã§ã™ã€‚AIã«ã‚ˆã£ã¦ç”Ÿæˆã•ã‚ŒãŸæ¶ç©ºã®ç‰©èªã§ã™ã€‚
        </div>

        <!-- ã‚¸ãƒ£ãƒ³ãƒ«é¸æŠ -->
        <h2 style="text-align: center; margin-bottom: 30px;">ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã‚¸ãƒ£ãƒ³ãƒ«ã‚’é¸æŠ</h2>
        <div class="genre-selector">
            <div class="genre-card" onclick="selectGenre('forbidden')">
                <div class="genre-icon">ğŸ”¥</div>
                <h3>ç¦æ–­ã®é–¢ä¿‚</h3>
                <p>è¨±ã•ã‚Œãªã„æ‹ã®ç‰©èª</p>
            </div>
            <div class="genre-card" onclick="selectGenre('dominant')">
                <div class="genre-icon">â›“ï¸</div>
                <h3>æ”¯é…ã¨æœå¾“</h3>
                <p>æ–°ãŸãªä¸–ç•Œã¸ã®æ‰‰</p>
            </div>
            <div class="genre-card" onclick="selectGenre('secret')">
                <div class="genre-icon">ğŸŒ™</div>
                <h3>ç§˜å¯†ã®é–¢ä¿‚</h3>
                <p>èª°ã«ã‚‚è¨€ãˆãªã„äºŒäººã ã‘ã®æ™‚é–“</p>
            </div>
            <div class="genre-card" onclick="selectGenre('transformation')">
                <div class="genre-icon">ğŸ¦‹</div>
                <h3>å¤‰åŒ–ã¨è¦šé†’</h3>
                <p>æ–°ã—ã„è‡ªåˆ†ã¨ã®å‡ºä¼šã„</p>
            </div>
        </div>

        <!-- ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã‚ªãƒ—ã‚·ãƒ§ãƒ³ -->
        <div class="customization">
            <h3 style="margin-bottom: 20px;">ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º</h3>
            
            <div class="slider-group">
                <div class="slider-label">
                    <span>å¼·åº¦</span>
                    <span id="intensityValue">5</span>
                </div>
                <input type="range" class="slider" id="intensity" min="1" max="10" value="5">
            </div>
            
            <div class="slider-group">
                <div class="slider-label">
                    <span>ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã®é•·ã•</span>
                    <span id="lengthValue">4ã‚·ãƒ¼ãƒ³</span>
                </div>
                <input type="range" class="slider" id="storyLength" min="3" max="8" value="4">
            </div>
            
            <div class="slider-group">
                <div class="slider-label">
                    <span>ç”»åƒã‚¹ã‚¿ã‚¤ãƒ«</span>
                    <span id="styleValue">ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒ†ã‚£ãƒƒã‚¯</span>
                </div>
                <select id="imageStyle" style="width: 100%; padding: 10px; background: #444; color: white; border: none; border-radius: 5px;">
                    <option value="artistic">ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒ†ã‚£ãƒƒã‚¯</option>
                    <option value="realistic">ãƒªã‚¢ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯</option>
                    <option value="vintage">ãƒ´ã‚£ãƒ³ãƒ†ãƒ¼ã‚¸</option>
                    <option value="noir">ãƒãƒ¯ãƒ¼ãƒ«</option>
                </select>
            </div>
        </div>

        <button class="generate-btn" onclick="generateStory()">ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã‚’ç”Ÿæˆ</button>

        <!-- ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º -->
        <div class="loading" id="loading">
            <div class="loading-spinner"></div>
            <p>ã‚ãªãŸã ã‘ã®ç‰©èªã‚’ç”Ÿæˆä¸­...</p>
        </div>

        <!-- ã‚¹ãƒˆãƒ¼ãƒªãƒ¼è¡¨ç¤ºã‚¨ãƒªã‚¢ -->
        <div class="story-viewer" id="storyViewer"></div>
    </div>

    <script>
        let selectedGenre = null;

        // ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
        const storyTemplates = {
            forbidden: {
                title: "ç¦æ–­ã®é–¢ä¿‚",
                scenes: [
                    {
                        text: "ãã®å‡ºä¼šã„ã¯å¶ç„¶ã ã£ãŸã€‚é›¨ã®é™ã‚‹å¤œã€é¿é›£ã—ãŸå¤ã„å›³æ›¸é¤¨ã§ã€ç§ãŸã¡ã¯é‹å‘½çš„ã«å‡ºä¼šã£ãŸã€‚",
                        mood: "mysterious",
                        imagePrompt: "dark library, rain, mysterious atmosphere"
                    },
                    {
                        text: "ç†æ€§ã§ã¯åˆ†ã‹ã£ã¦ã„ã‚‹ã€‚ã“ã®æ„Ÿæƒ…ã¯è¨±ã•ã‚Œãªã„ã‚‚ã®ã ã¨ã€‚ã—ã‹ã—ã€å¿ƒã¯åˆ¥ã®ç­”ãˆã‚’æ±‚ã‚ã¦ã„ãŸã€‚",
                        mood: "conflicted",
                        imagePrompt: "emotional conflict, forbidden desire"
                    },
                    {
                        text: "æœˆæ˜ã‹ã‚Šã®ä¸‹ã€ã¤ã„ã«ç§ãŸã¡ã¯ä¸€ç·šã‚’è¶ŠãˆãŸã€‚ã‚‚ã†å¾Œæˆ»ã‚Šã¯ã§ããªã„ã€‚",
                        mood: "passionate",
                        imagePrompt: "moonlight, intimate moment"
                    },
                    {
                        text: "æœæ—¥ãŒæ˜‡ã‚‹ã€‚æ–°ã—ã„ä¸€æ—¥ã®å§‹ã¾ã‚Šã¯ã€ç§ãŸã¡ã«ã¨ã£ã¦æ–°ã—ã„é–¢ä¿‚ã®å§‹ã¾ã‚Šã§ã‚‚ã‚ã£ãŸã€‚",
                        mood: "hopeful",
                        imagePrompt: "sunrise, new beginning"
                    }
                ]
            },
            dominant: {
                title: "æ”¯é…ã¨æœå¾“",
                scenes: [
                    {
                        text: "å¥‘ç´„æ›¸ã«ã‚µã‚¤ãƒ³ã‚’ã™ã‚‹æ‰‹ãŒéœ‡ãˆã¦ã„ãŸã€‚ã“ã‚Œã‹ã‚‰å§‹ã¾ã‚‹æ–°ã—ã„ä¸–ç•Œã¸ã®æœŸå¾…ã¨ä¸å®‰ãŒå…¥ã‚Šæ··ã˜ã‚‹ã€‚",
                        mood: "anticipation",
                        imagePrompt: "contract signing, nervous anticipation"
                    },
                    {
                        text: "æœ€åˆã®ãƒ¬ãƒƒã‚¹ãƒ³ã€‚ä»Šã¾ã§çŸ¥ã‚‰ãªã‹ã£ãŸè‡ªåˆ†ã®ä¸€é¢ãŒã€å°‘ã—ãšã¤å§¿ã‚’ç¾ã—å§‹ã‚ã‚‹ã€‚",
                        mood: "discovery",
                        imagePrompt: "first lesson, self-discovery"
                    },
                    {
                        text: "æŠµæŠ—ã¨å—å®¹ã®é–“ã§æºã‚Œå‹•ãå¿ƒã€‚ã—ã‹ã—ã€æ¬¡ç¬¬ã«æ–°ã—ã„å¿«æ¥½ã®å½¢ã‚’ç†è§£ã—å§‹ã‚ã‚‹ã€‚",
                        mood: "acceptance",
                        imagePrompt: "internal struggle, acceptance"
                    },
                    {
                        text: "å®Œå…¨ãªä¿¡é ¼é–¢ä¿‚ã®ä¸­ã§ã€çœŸã®è‡ªç”±ã‚’è¦‹ã¤ã‘ãŸã€‚æ”¯é…ã¨æœå¾“ã¯ã€ãŠäº’ã„ã‚’è§£æ”¾ã™ã‚‹éµã ã£ãŸã€‚",
                        mood: "liberation",
                        imagePrompt: "trust, liberation, freedom"
                    }
                ]
            }
        };

        // ã‚µãƒ³ãƒ—ãƒ«ç”»åƒï¼ˆå®Ÿéš›ã¯APIã‹ã‚‰å–å¾—ï¼‰
        const sampleImages = [
            "https://images.unsplash.com/photo-1516589178581-6cd7833ae3b2?w=800&q=80",
            "https://images.unsplash.com/photo-1519699047748-de8e457a634e?w=800&q=80",
            "https://images.unsplash.com/photo-1502716119720-b23a93e5fe1b?w=800&q=80",
            "https://images.unsplash.com/photo-1515191107209-c28698631303?w=800&q=80"
        ];

        // ã‚¸ãƒ£ãƒ³ãƒ«é¸æŠ
        function selectGenre(genre) {
            selectedGenre = genre;
            document.querySelectorAll('.genre-card').forEach(card => {
                card.classList.remove('selected');
            });
            event.target.closest('.genre-card').classList.add('selected');
        }

        // ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼å€¤ã®æ›´æ–°
        document.getElementById('intensity').oninput = function() {
            document.getElementById('intensityValue').textContent = this.value;
        };

        document.getElementById('storyLength').oninput = function() {
            document.getElementById('lengthValue').textContent = this.value + 'ã‚·ãƒ¼ãƒ³';
        };

        // ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ç”Ÿæˆ
        async function generateStory() {
            if (!selectedGenre) {
                alert('ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã‚¸ãƒ£ãƒ³ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„');
                return;
            }

            const loading = document.getElementById('loading');
            const viewer = document.getElementById('storyViewer');
            
            loading.classList.add('active');
            viewer.classList.remove('active');
            viewer.innerHTML = '';

            // æ“¬ä¼¼çš„ãªé…å»¶ï¼ˆå®Ÿéš›ã¯APIå‘¼ã³å‡ºã—ï¼‰
            await new Promise(resolve => setTimeout(resolve, 3000));

            const template = storyTemplates[selectedGenre] || storyTemplates.forbidden;
            const intensity = document.getElementById('intensity').value;
            const length = parseInt(document.getElementById('storyLength').value);

            // ã‚¹ãƒˆãƒ¼ãƒªãƒ¼è¡¨ç¤º
            viewer.innerHTML = `<h2 style="text-align: center; margin-bottom: 40px;">${template.title}</h2>`;

            for (let i = 0; i < Math.min(length, template.scenes.length); i++) {
                const scene = template.scenes[i];
                const sceneDiv = document.createElement('div');
                sceneDiv.className = 'scene';
                sceneDiv.style.animationDelay = `${i * 0.5}s`;
                
                // å®Ÿéš›ã¯AI APIã§ç”»åƒç”Ÿæˆ
                const imageUrl = sampleImages[i % sampleImages.length];
                
                sceneDiv.innerHTML = `
                    <div class="scene-number">Scene ${i + 1}</div>
                    <img src="${imageUrl}" alt="Scene ${i + 1}" class="scene-image">
                    <div class="scene-text">${scene.text}</div>
                `;
                
                viewer.appendChild(sceneDiv);
            }

            loading.classList.remove('active');
            viewer.classList.add('active');
        }

        // ç”»åƒåé›†ã‚·ã‚¹ãƒ†ãƒ ï¼ˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å®Ÿè£…ãŒå¿…è¦ï¼‰
        class ImageCollector {
            constructor() {
                this.sources = [
                    'unsplash',
                    'pexels',
                    'pixabay'
                ];
            }

            async collectImages(query, mood) {
                // å®Ÿéš›ã®APIã‚³ãƒ¼ãƒ«
                // const images = await fetch(`/api/collect-images?query=${query}&mood=${mood}`);
                // return images.json();
                
                // ãƒ‡ãƒ¢ç”¨
                return sampleImages;
            }
        }

        // ã‚¹ãƒˆãƒ¼ãƒªãƒ¼è‡ªå‹•ç”ŸæˆAIï¼ˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å®Ÿè£…ãŒå¿…è¦ï¼‰
        class StoryAI {
            async generateText(genre, intensity, previousScenes) {
                // å®Ÿéš›ã®AI APIï¼ˆOpenAIç­‰ï¼‰å‘¼ã³å‡ºã—
                // const response = await fetch('/api/generate-story', {
                //     method: 'POST',
                //     body: JSON.stringify({ genre, intensity, previousScenes })
                // });
                // return response.json();
                
                // ãƒ‡ãƒ¢ç”¨
                return "AIç”Ÿæˆã•ã‚ŒãŸã‚¹ãƒˆãƒ¼ãƒªãƒ¼ãƒ†ã‚­ã‚¹ãƒˆ";
            }
        }
    </script>
</body>
</html>
// ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã§å®Ÿè£…
const imageAPIs = {
    unsplash: 'https://api.unsplash.com/search/photos',
    pexels: 'https://api.pexels.com/v1/search',
    pixabay: 'https://pixabay.com/api/'
};

// é©åˆ‡ãªãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
function filterAdultContent(images) {
    return images.filter(img => 
        img.tags.includes('artistic') && 
        !img.tags.includes('explicit')
    );
}
