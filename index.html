<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIÁîªÂÉèÊ§úÁ¥¢„Ç®„É≥„Ç∏„É≥ÔºÜÊº´Áîª‰ΩúÊàê | „Åæ„Åï„Åè„Çì„ÇÆ„É£„É©„É™„Éº</title>
    <meta name="description" content="AIÁîüÊàêÁîªÂÉè„ÇíÊ§úÁ¥¢„Åó„Å¶„ÄÅ„Ç™„É™„Ç∏„Éä„É´Êº´Áîª„Çí‰ΩúÊàêÔºÅÁÑ°Êñô„Åß‰Ωø„Åà„ÇãÁîªÂÉèÊ§úÁ¥¢„Ç®„É≥„Ç∏„É≥„ÄÇ">
    <meta name="keywords" content="AI „Ç§„É©„Çπ„Éà, ÁîªÂÉèÊ§úÁ¥¢, Êº´Áîª‰ΩúÊàê, AI„Ç¢„Éº„Éà, ÁÑ°Êñô, „ÉÄ„Ç¶„É≥„É≠„Éº„Éâ">
    <style>
        * {
            box-sizing: border-box;
        }
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f0f2f5;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .header h1 {
            margin: 0;
            font-size: 2.5em;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        .mode-switch {
            text-align: center;
            margin: 20px 0;
        }
        .mode-btn {
            padding: 12px 30px;
            margin: 0 10px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .mode-btn.active {
            background: #667eea;
            color: white;
            transform: scale(1.05);
        }
        .mode-btn:not(.active) {
            background: white;
            color: #667eea;
            border: 2px solid #667eea;
        }
        
        /* Ê§úÁ¥¢„Çª„ÇØ„Ç∑„Éß„É≥ */
        .search-section {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        .search-main {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        .search-input {
            flex: 1;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
        }
        .search-btn {
            padding: 15px 30px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
        }
        .filters {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        .filter-group label {
            font-weight: bold;
            color: #555;
        }
        .filter-group select {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .tag-filters {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }
        .tag-checkbox {
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 5px 10px;
            background: #f5f5f5;
            border-radius: 20px;
            cursor: pointer;
        }
        
        /* ÁîªÂÉè„Ç∞„É™„ÉÉ„Éâ */
        .image-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .image-card {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            transition: transform 0.3s;
            cursor: pointer;
            position: relative;
        }
        .image-card:hover {
            transform: translateY(-5px);
        }
        .image-card.selected {
            border: 3px solid #667eea;
        }
        .image-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }
        .image-info {
            padding: 15px;
        }
        .image-title {
            font-weight: bold;
            margin-bottom: 5px;
        }
        .image-stats {
            font-size: 12px;
            color: #666;
            margin: 5px 0;
        }
        .image-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-top: 10px;
        }
        .tag {
            background: #e3f2fd;
            color: #1976d2;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 11px;
        }
        .select-for-manga {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #ff4081;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.3s;
        }
        .image-card:hover .select-for-manga {
            opacity: 1;
        }
        
        /* Êº´Áîª‰ΩúÊàê„Çª„ÇØ„Ç∑„Éß„É≥ */
        .manga-section {
            display: none;
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
        }
        .manga-section.active {
            display: block;
        }
        .layout-selector {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-bottom: 30px;
        }
        .layout-option {
            padding: 20px;
            border: 2px solid #ddd;
            border-radius: 10px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s;
        }
        .layout-option:hover {
            border-color: #667eea;
            transform: scale(1.05);
        }
        .layout-option.selected {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }
        .manga-canvas {
            border: 2px dashed #ddd;
            border-radius: 10px;
            padding: 20px;
            min-height: 500px;
            position: relative;
            background: #fafafa;
        }
        .manga-4koma {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            max-width: 400px;
            margin: 0 auto;
        }
        .manga-panel {
            background: white;
            border: 2px solid #333;
            border-radius: 5px;
            min-height: 200px;
            position: relative;
            overflow: hidden;
        }
        .panel-placeholder {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%;
            color: #999;
            font-size: 14px;
        }
        .panel-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .dialogue-bubble {
            position: absolute;
            background: white;
            border: 2px solid #333;
            border-radius: 10px;
            padding: 10px;
            max-width: 150px;
            font-size: 14px;
            cursor: move;
        }
        .selected-images {
            display: flex;
            gap: 10px;
            overflow-x: auto;
            padding: 10px;
            background: #f5f5f5;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        .selected-image {
            width: 100px;
            height: 100px;
            object-fit: cover;
            border-radius: 5px;
            cursor: grab;
        }
        .dialogue-controls {
            margin-top: 20px;
            display: flex;
            gap: 10px;
        }
        .dialogue-input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .export-section {
            margin-top: 30px;
            text-align: center;
        }
        .export-btn {
            padding: 15px 40px;
            background: #4caf50;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            cursor: pointer;
        }
        
        /* „É¨„Çπ„Éù„É≥„Ç∑„Éñ */
        @media (max-width: 768px) {
            .filters {
                grid-template-columns: 1fr;
            }
            .image-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üîçüé® AIÁîªÂÉèÊ§úÁ¥¢„Ç®„É≥„Ç∏„É≥ÔºÜÊº´Áîª‰ΩúÊàê„ÉÑ„Éº„É´</h1>
        <p>ÁîªÂÉè„ÇíÊ§úÁ¥¢„Åó„Å¶„ÄÅ„Ç™„É™„Ç∏„Éä„É´Êº´Áîª„Çí‰Ωú„Çç„ÅÜÔºÅ</p>
    </div>

    <div class="container">
        <!-- „É¢„Éº„ÉâÂàá„ÇäÊõø„Åà -->
        <div class="mode-switch">
            <button class="mode-btn active" onclick="switchMode('search')">üîç ÁîªÂÉèÊ§úÁ¥¢„É¢„Éº„Éâ</button>
            <button class="mode-btn" onclick="switchMode('manga')">üìö Êº´Áîª‰ΩúÊàê„É¢„Éº„Éâ</button>
        </div>

        <!-- Ê§úÁ¥¢„Çª„ÇØ„Ç∑„Éß„É≥ -->
        <div class="search-section" id="searchSection">
            <h2>üîç ÁîªÂÉè„ÇíÊ§úÁ¥¢</h2>
            
            <div class="search-main">
                <input type="text" class="search-input" id="searchInput" placeholder="„Ç≠„Éº„ÉØ„Éº„Éâ„ÇíÂÖ•Âäõ...Ôºà‰æãÔºöÁæéÂ∞ëÂ•≥„ÄÅÈ¢®ÊôØ„ÄÅ„Éï„Ç°„É≥„Çø„Ç∏„ÉºÔºâ">
                <button class="search-btn" onclick="performSearch()">Ê§úÁ¥¢</button>
            </div>

            <div class="filters">
                <div class="filter-group">
                    <label>„Çπ„Çø„Ç§„É´</label>
                    <select id="styleFilter">
                        <option value="">„Åô„Åπ„Å¶</option>
                        <option value="anime">„Ç¢„Éã„É°</option>
                        <option value="realistic">„É™„Ç¢„É´</option>
                        <option value="fantasy">„Éï„Ç°„É≥„Çø„Ç∏„Éº</option>
                        <option value="cyberpunk">„Çµ„Ç§„Éê„Éº„Éë„É≥„ÇØ</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>„Ç´„É©„Éº</label>
                    <select id="colorFilter">
                        <option value="">„Åô„Åπ„Å¶</option>
                        <option value="colorful">„Ç´„É©„Éï„É´</option>
                        <option value="monochrome">„É¢„Éé„ÇØ„É≠</option>
                        <option value="pastel">„Éë„Çπ„ÉÜ„É´</option>
                        <option value="dark">„ÉÄ„Éº„ÇØ</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>„Ç´„ÉÜ„Ç¥„É™„Éº</label>
                    <select id="categoryFilter">
                        <option value="">„Åô„Åπ„Å¶</option>
                        <option value="character">„Ç≠„É£„É©„ÇØ„Çø„Éº</option>
                        <option value="landscape">È¢®ÊôØ</option>
                        <option value="object">„Ç™„Éñ„Ç∏„Çß„ÇØ„Éà</option>
                        <option value="abstract">ÊäΩË±°</option>
                    </select>
                </div>
            </div>

            <div class="tag-filters">
                <label class="tag-checkbox">
                    <input type="checkbox" value="ÁæéÂ∞ëÂ•≥"> ÁæéÂ∞ëÂ•≥
                </label>
                <label class="tag-checkbox">
                    <input type="checkbox" value="„Éï„Ç°„É≥„Çø„Ç∏„Éº"> „Éï„Ç°„É≥„Çø„Ç∏„Éº
                </label>
                <label class="tag-checkbox">
                    <input type="checkbox" value="È¢®ÊôØ"> È¢®ÊôØ
                </label>
                <label class="tag-checkbox">
                    <input type="checkbox" value="ÂãïÁâ©"> ÂãïÁâ©
                </label>
                <label class="tag-checkbox">
                    <input type="checkbox" value="SF"> SF
                </label>
            </div>
        </div>

        <!-- ÁîªÂÉè„Ç∞„É™„ÉÉ„Éâ -->
        <div class="image-grid" id="imageGrid"></div>

        <!-- Êº´Áîª‰ΩúÊàê„Çª„ÇØ„Ç∑„Éß„É≥ -->
        <div class="manga-section" id="mangaSection">
            <h2>üìö Êº´Áîª„Çí‰ΩúÊàê</h2>

            <!-- ÈÅ∏Êäû„Åó„ÅüÁîªÂÉè -->
            <div class="selected-images" id="selectedImages">
                <p style="color: #999;">ÈÅ∏Êäû„Åó„ÅüÁîªÂÉè„Åå„Åì„Åì„Å´Ë°®Á§∫„Åï„Çå„Åæ„Åô</p>
            </div>

            <!-- „É¨„Ç§„Ç¢„Ç¶„ÉàÈÅ∏Êäû -->
            <div class="layout-selector">
                <div class="layout-option selected" onclick="selectLayout('4koma')">
                    <h3>4„Ç≥„ÉûÊº´Áîª</h3>
                    <p>Á∏¶4„Ç≥„Éû„ÅÆÂÆöÁï™„Çπ„Çø„Ç§„É´</p>
                </div>
                <div class="layout-option" onclick="selectLayout('2x2')">
                    <h3>2√ó2„É¨„Ç§„Ç¢„Ç¶„Éà</h3>
                    <p>4„Å§„ÅÆ„Éë„Éç„É´</p>
                </div>
                <div class="layout-option" onclick="selectLayout('free')">
                    <h3>„Éï„É™„Éº„Çπ„Çø„Ç§„É´</h3>
                    <p>Ëá™Áî±„Å´„É¨„Ç§„Ç¢„Ç¶„Éà</p>
                </div>
            </div>

            <!-- Êº´Áîª„Ç≠„É£„É≥„Éê„Çπ -->
            <div class="manga-canvas" id="mangaCanvas">
                <div class="manga-4koma" id="mangaPanels">
                    <div class="manga-panel" ondrop="dropImage(event, 0)" ondragover="allowDrop(event)">
                        <div class="panel-placeholder">ÁîªÂÉè„Çí„Éâ„É≠„ÉÉ„Éó</div>
                    </div>
                    <div class="manga-panel" ondrop="dropImage(event, 1)" ondragover="allowDrop(event)">
                        <div class="panel-placeholder">ÁîªÂÉè„Çí„Éâ„É≠„ÉÉ„Éó</div>
                    </div>
                    <div class="manga-panel" ondrop="dropImage(event, 2)" ondragover="allowDrop(event)">
                        <div class="panel-placeholder">ÁîªÂÉè„Çí„Éâ„É≠„ÉÉ„Éó</div>
                    </div>
                    <div class="manga-panel" ondrop="dropImage(event, 3)" ondragover="allowDrop(event)">
                        <div class="panel-placeholder">ÁîªÂÉè„Çí„Éâ„É≠„ÉÉ„Éó</div>
                    </div>
                </div>
            </div>

            <!-- „Çª„É™„ÉïËøΩÂä† -->
            <div class="dialogue-controls">
                <input type="text" class="dialogue-input" id="dialogueInput" placeholder="„Çª„É™„Éï„ÇíÂÖ•Âäõ...">
                <button class="search-btn" onclick="addDialogue()">„Çª„É™„Éï„ÇíËøΩÂä†</button>
            </div>

            <!-- „Ç®„ÇØ„Çπ„Éù„Éº„Éà -->
            <div class="export-section">
                <button class="export-btn" onclick="exportManga()">üíæ Êº´Áîª„Çí‰øùÂ≠ò</button>
            </div>
        </div>
    </div>

    <script>
        // ÁîªÂÉè„Éá„Éº„Çø„Éô„Éº„ÇπÔºàÊã°ÂºµÁâàÔºâ
        const images = [
            {
                id: 1,
                url: "https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400",
                title: "Áæé„Åó„ÅÑÂ±±„ÅÆÈ¢®ÊôØ",
                tags: ["Ëá™ÁÑ∂", "Â±±", "È¢®ÊôØ"],
                category: "landscape",
                style: "realistic",
                color: "colorful",
                views: 1250,
                downloads: 89
            },
            {
                id: 2,
                url: "https://images.unsplash.com/photo-1581833971358-2c8b550f87b3?w=400",
                title: "„Ç¢„Éã„É°È¢®„Ç§„É©„Çπ„Éà",
                tags: ["„Ç¢„Éã„É°", "„Ç§„É©„Çπ„Éà", "ÁæéÂ∞ëÂ•≥"],
                category: "character",
                style: "anime",
                color: "colorful",
                views: 3200,
                downloads: 234
            },
            {
                id: 3,
                url: "https://images.unsplash.com/photo-1518837695005-2083093ee35b?w=400",
                title: "Êµ∑„ÅÆÂ§ïÊó•",
                tags: ["Êµ∑", "Â§ïÊó•", "È¢®ÊôØ"],
                category: "landscape",
                style: "realistic",
                color: "colorful",
                views: 2100,
                downloads: 156
            },
            {
                id: 4,
                url: "https://images.unsplash.com/photo-1493514789931-586cb221d7a7?w=400",
                title: "ÂÆáÂÆô„ÅÆÁ•ûÁßò",
                tags: ["ÂÆáÂÆô", "Êòü", "„Éï„Ç°„É≥„Çø„Ç∏„Éº"],
                category: "abstract",
                style: "fantasy",
                color: "dark",
                views: 5000,
                downloads: 400
            },
            {
                id: 5,
                url: "https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=400",
                title: "Ê£Æ„ÅÆÂ∞èÈÅì",
                tags: ["Ê£Æ", "Ëá™ÁÑ∂", "ÈÅì"],
                category: "landscape",
                style: "realistic",
                color: "colorful",
                views: 980,
                downloads: 67
            },
            {
                id: 6,
                url: "https://images.unsplash.com/photo-1469474968028-56623f02e42e?w=400",
                title: "ÊòüÁ©∫„ÅÆÂ§ú",
                tags: ["Êòü", "Â§ú", "Ëá™ÁÑ∂"],
                category: "landscape",
                style: "realistic",
                color: "dark",
                views: 3200,
                downloads: 234
            }
        ];

        // ÈÅ∏Êäû„Åï„Çå„ÅüÁîªÂÉè
        let selectedImages = [];
        let currentMode = 'search';
        let currentLayout = '4koma';

        // ÂàùÊúüË°®Á§∫
        displayImages(images);

        // „É¢„Éº„ÉâÂàá„ÇäÊõø„Åà
        function switchMode(mode) {
            currentMode = mode;
            document.querySelectorAll('.mode-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            if (mode === 'search') {
                document.getElementById('searchSection').style.display = 'block';
                document.getElementById('imageGrid').style.display = 'grid';
                document.getElementById('mangaSection').classList.remove('active');
            } else {
                document.getElementById('searchSection').style.display = 'none';
                document.getElementById('imageGrid').style.display = 'none';
                document.getElementById('mangaSection').classList.add('active');
                updateSelectedImagesDisplay();
            }
        }

        // ÁîªÂÉèÊ§úÁ¥¢
        function performSearch() {
            const keyword = document.getElementById('searchInput').value.toLowerCase();
            const style = document.getElementById('styleFilter').value;
            const color = document.getElementById('colorFilter').value;
            const category = document.getElementById('categoryFilter').value;
            const selectedTags = Array.from(document.querySelectorAll('.tag-checkbox input:checked')).map(cb => cb.value);
            
            let results = images;
            
            // „Ç≠„Éº„ÉØ„Éº„ÉâÊ§úÁ¥¢
            if (keyword) {
                results = results.filter(img => 
                    img.title.toLowerCase().includes(keyword) ||
                    img.tags.some(tag => tag.toLowerCase().includes(keyword))
                );
            }
            
            // „Éï„Ç£„É´„Çø„ÉºÈÅ©Áî®
            if (style) results = results.filter(img => img.style === style);
            if (color) results = results.filter(img => img.color === color);
            if (category) results = results.filter(img => img.category === category);
            
            // „Çø„Ç∞„Éï„Ç£„É´„Çø„Éº
            if (selectedTags.length > 0) {
                results = results.filter(img =>
                    selectedTags.some(tag => img.tags.includes(tag))
                );
            }
            
            displayImages(results);
        }

        // ÁîªÂÉèË°®Á§∫
        function displayImages(imagesToShow) {
            const grid = document.getElementById('imageGrid');
            grid.innerHTML = '';
            
            imagesToShow.forEach(image => {
                const card = document.createElement('div');
                card.className = 'image-card';
                if (selectedImages.find(img => img.id === image.id)) {
                    card.classList.add('selected');
                }
                
                card.innerHTML = `
                    <img src="${image.url}" alt="${image.title}" draggable="true" ondragstart="dragStart(event, ${image.id})">
                    <button class="select-for-manga" onclick="toggleImageSelection(${image.id})">
                        ${selectedImages.find(img => img.id === image.id) ? '‚úì ÈÅ∏Êäû‰∏≠' : '+ ÈÅ∏Êäû'}
                    </button>
                    <div class="image-info">
                        <div class="image-title">${image.title}</div>
                        <div class="image-stats">
                            üëÅ ${image.views} views | üíæ ${image.downloads} downloads
                        </div>
                        <div class="image-tags">
                            ${image.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                        </div>
                    </div>
                `;
                
                grid.appendChild(card);
            });
        }

        // ÁîªÂÉèÈÅ∏Êäû
        function toggleImageSelection(imageId) {
            const image = images.find(img => img.id === imageId);
            const index = selectedImages.findIndex(img => img.id === imageId);
            
            if (index > -1) {
                selectedImages.splice(index, 1);
            } else {
                selectedImages.push(image);
            }
            
            displayImages(images);
            updateSelectedImagesDisplay();
        }

        // ÈÅ∏ÊäûÁîªÂÉèË°®Á§∫Êõ¥Êñ∞
        function updateSelectedImagesDisplay() {
            const container = document.getElementById('selectedImages');
            if (selectedImages.length === 0) {
                container.innerHTML = '<p style="color: #999;">ÈÅ∏Êäû„Åó„ÅüÁîªÂÉè„Åå„Åì„Åì„Å´Ë°®Á§∫„Åï„Çå„Åæ„Åô</p>';
                return;
            }
            
            container.innerHTML = selectedImages.map(img => `
                <img src="${img.url}" alt="${img.title}" class="selected-image" 
                     draggable="true" ondragstart="dragStart(event, ${img.id})">
            `).join('');
        }

        // „É¨„Ç§„Ç¢„Ç¶„ÉàÈÅ∏Êäû
        function selectLayout(layout) {
            currentLayout = layout;
            document.querySelectorAll('.layout-option').forEach(opt => opt.classList.remove('selected'));
            event.target.closest('.layout-option').classList.add('selected');
            
            const canvas = document.getElementById('mangaPanels');
            
            if (layout === '4koma') {
                canvas.className = 'manga-4koma';
                canvas.innerHTML = `
                    <div class="manga-panel" ondrop="dropImage(event, 0)" ondragover="allowDrop(event)">
                        <div class="panel-placeholder">ÁîªÂÉè„Çí„Éâ„É≠„ÉÉ„Éó</div>
                    </div>
                    <div class="manga-panel" ondrop="dropImage(event, 1)" ondragover="allowDrop(event)">
                        <div class="panel-placeholder">ÁîªÂÉè„Çí„Éâ„É≠„ÉÉ„Éó</div>
                    </div>
                    <div class="manga-panel" ondrop="dropImage(event, 2)" ondragover="allowDrop(event)">
                        <div class="panel-placeholder">ÁîªÂÉè„Çí„Éâ„É≠„ÉÉ„Éó</div>
                    </div>
                    <div class="manga-panel" ondrop="dropImage(event, 3)" ondragover="allowDrop(event)">
                        <div class="panel-placeholder">ÁîªÂÉè„Çí„Éâ„É≠„ÉÉ„Éó</div>
                    </div>
                `;
            } else if (layout === '2x2') {
                canvas.style.display = 'grid';
                canvas.style.gridTemplateColumns = '1fr 1fr';
                canvas.style.maxWidth = '600px';
                canvas.innerHTML = `
                    <div class="manga-panel" ondrop="dropImage(event, 0)" ondragover="allowDrop(event)">
                        <div class="panel-placeholder">ÁîªÂÉè„Çí„Éâ„É≠„ÉÉ„Éó</div>
                    </div>
                    <div class="manga-panel" ondrop="dropImage(event, 1)" ondragover="allowDrop(event)">
                        <div class="panel-placeholder">ÁîªÂÉè„Çí„Éâ„É≠„ÉÉ„Éó</div>
                    </div>
                    <div class="manga-panel" ondrop="dropImage(event, 2)" ondragover="allowDrop(event)">
                        <div class="panel-placeholder">ÁîªÂÉè„Çí„Éâ„É≠„ÉÉ„Éó</div>
                    </div>
                    <div class="manga-panel" ondrop="dropImage(event, 3)" ondragover="allowDrop(event)">
                        <div class="panel-placeholder">ÁîªÂÉè„Çí„Éâ„É≠„ÉÉ„Éó</div>
                    </div>
                `;
            }
        }

        // „Éâ„É©„ÉÉ„Ç∞&„Éâ„É≠„ÉÉ„Éó
        let draggedImageId = null;

        function dragStart(event, imageId) {
            draggedImageId = imageId;
        }

        function allowDrop(event) {
            event.preventDefault();
        }

        function dropImage(event, panelIndex) {
            event.preventDefault();
            const panel = event.target.closest('.manga-panel');
            const image = images.find(img => img.id === draggedImageId);
            
            if (image && panel) {
                panel.innerHTML = `<img src="${image.url}" alt="${image.title}" class="panel-image">`;
            }
        }

        // „Çª„É™„ÉïËøΩÂä†
        function addDialogue() {
            const text = document.getElementById('dialogueInput').value;
            if (!text) return;
            
            const bubble = document.createElement('div');
            bubble.className = 'dialogue-bubble';
            bubble.textContent = text;
            bubble.style.top = '20px';
            bubble.style.left = '20px';
            
            // „Éâ„É©„ÉÉ„Ç∞ÂèØËÉΩ„Å´„Åô„Çã
            makeDraggable(bubble);
            
            document.getElementById('mangaCanvas').appendChild(bubble);
            document.getElementById('dialogueInput').value = '';
        }

        // Ë¶ÅÁ¥†„Çí„Éâ„É©„ÉÉ„Ç∞ÂèØËÉΩ„Å´„Åô„Çã
        function makeDraggable(element) {
            let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
            element.onmousedown = dragMouseDown;

            function dragMouseDown(e) {
                e = e || window.event;
                e.preventDefault();
                pos3 = e.clientX;
                pos4 = e.clientY;
                document.onmouseup = closeDragElement;
                document.onmousemove = elementDrag;
            }

            function elementDrag(e) {
                e = e || window.event;
                e.preventDefault();
                pos1 = pos3 - e.clientX;
                pos2 = pos4 - e.clientY;
                pos3 = e.clientX;
                pos4 = e.clientY;
                element.style.top = (element.offsetTop - pos2) + "px";
                element.style.left = (element.offsetLeft - pos1) + "px";
            }

            function closeDragElement() {
                document.onmouseup = null;
                document.onmousemove = null;
            }
        }

        // Êº´Áîª„Çí„Ç®„ÇØ„Çπ„Éù„Éº„Éà
        function exportManga() {
            alert('Êº´Áîª„ÅÆ‰øùÂ≠òÊ©üËÉΩ„ÅØÊ∫ñÂÇô‰∏≠„Åß„ÅôÔºÅ\n\nÁèæÂú®„ÅØÁîªÈù¢„ÅÆ„Çπ„ÇØ„É™„Éº„É≥„Ç∑„Éß„ÉÉ„Éà„ÇíÊíÆ„Å£„Å¶‰øùÂ≠ò„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ');
            // Â∞ÜÊù•ÁöÑ„Å´„ÅØhtml2canvas„Å™„Å©„Çí‰Ωø„Å£„Å¶ÁîªÂÉè„Å®„Åó„Å¶‰øùÂ≠ò
        }

        // Enter„Ç≠„Éº„ÅßÊ§úÁ¥¢
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') performSearch();
        });
    </script>
</body>
</html>
