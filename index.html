// ストーリーテンプレートシステム
const storyTemplates = {
    "禁断の関係": {
        scenes: [
            { type: "introduction", mood: "mysterious", text: "運命の出会い" },
            { type: "tension", mood: "intense", text: "抗えない衝動" },
            { type: "climax", mood: "passionate", text: "秘密の時間" },
            { type: "ending", mood: "bittersweet", text: "新たな関係性" }
        ]
    },
    "支配と服従": {
        scenes: [
            { type: "setup", mood: "dominant", text: "契約の始まり" },
            { type: "training", mood: "strict", text: "新しい世界への導き" },
            { type: "resistance", mood: "conflicted", text: "心の葛藤" },
            { type: "acceptance", mood: "submissive", text: "真の解放" }
        ]
    }
};

// 画像自動マッチングシステム
class ImageMatcher {
    constructor() {
        this.imageDatabase = [];
    }
    
    findImageForScene(scene) {
        // シーンのムードやタイプに基づいて適切な画像を選択
        return this.imageDatabase.filter(img => 
            img.mood === scene.mood && 
            img.type === scene.type
        );
    }
}
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forbidden Stories - AI自動ストーリー生成</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            background: #1a1a1a;
            color: #fff;
            font-family: 'Georgia', serif;
            line-height: 1.6;
        }
        .header {
            background: linear-gradient(135deg, #8B0000 0%, #000000 100%);
            padding: 30px;
            text-align: center;
            border-bottom: 2px solid #8B0000;
        }
        .header h1 {
            font-size: 3em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
            letter-spacing: 3px;
        }
        .tagline {
            font-style: italic;
            opacity: 0.8;
            margin-top: 10px;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        
        /* ジャンル選択 */
        .genre-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        .genre-card {
            background: #2a2a2a;
            border: 1px solid #8B0000;
            border-radius: 10px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }
        .genre-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(139, 0, 0, 0.5);
        }
        .genre-card.selected {
            background: #8B0000;
        }
        .genre-icon {
            font-size: 3em;
            margin-bottom: 10px;
        }
        
        /* カスタマイズオプション */
        .customization {
            background: #2a2a2a;
            border-radius: 10px;
            padding: 30px;
            margin-bottom: 30px;
        }
        .slider-group {
            margin: 20px 0;
        }
        .slider-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        .slider {
            width: 100%;
            height: 10px;
            border-radius: 5px;
            background: #444;
            outline: none;
            -webkit-appearance: none;
        }
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background: #8B0000;
            cursor: pointer;
        }
        
        /* 生成ボタン */
        .generate-btn {
            background: linear-gradient(135deg, #8B0000 0%, #DC143C 100%);
            color: white;
            border: none;
            padding: 20px 60px;
            font-size: 1.2em;
            border-radius: 50px;
            cursor: pointer;
            display: block;
            margin: 40px auto;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        .generate-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(220, 20, 60, 0.5);
        }
        
        /* ストーリー表示 */
        .story-viewer {
            background: #000;
            border-radius: 10px;
            padding: 20px;
            margin-top: 40px;
            display: none;
        }
        .story-viewer.active {
            display: block;
        }
        .scene {
            margin-bottom: 40px;
            opacity: 0;
            animation: fadeIn 1s forwards;
        }
        @keyframes fadeIn {
            to { opacity: 1; }
        }
        .scene-image {
            width: 100%;
            max-width: 800px;
            height: 400px;
            object-fit: cover;
            border-radius: 10px;
            margin: 0 auto 20px;
            display: block;
            filter: contrast(1.1) saturate(0.9);
        }
        .scene-text {
            max-width: 800px;
            margin: 0 auto;
            font-size: 1.2em;
            line-height: 1.8;
            text-align: justify;
            padding: 20px;
            background: rgba(139, 0, 0, 0.1);
            border-left: 3px solid #8B0000;
        }
        .scene-number {
            color: #8B0000;
            font-size: 0.9em;
            margin-bottom: 10px;
        }
        
        /* エフェクト */
        .loading {
            text-align: center;
            padding: 40px;
            display: none;
        }
        .loading.active {
            display: block;
        }
        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #8B0000;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* 警告表示 */
        .warning {
            background: #8B0000;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 30px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Forbidden Stories</h1>
        <p class="tagline">AIが紡ぐ、あなただけの官能的な物語</p>
    </div>

    <div class="container">
        <div class="warning">
            ⚠️ このコンテンツは18歳以上の方のみ対象です。AIによって生成された架空の物語です。
        </div>

        <!-- ジャンル選択 -->
        <h2 style="text-align: center; margin-bottom: 30px;">ストーリージャンルを選択</h2>
        <div class="genre-selector">
            <div class="genre-card" onclick="selectGenre('forbidden')">
                <div class="genre-icon">🔥</div>
                <h3>禁断の関係</h3>
                <p>許されない恋の物語</p>
            </div>
            <div class="genre-card" onclick="selectGenre('dominant')">
                <div class="genre-icon">⛓️</div>
                <h3>支配と服従</h3>
                <p>新たな世界への扉</p>
            </div>
            <div class="genre-card" onclick="selectGenre('secret')">
                <div class="genre-icon">🌙</div>
                <h3>秘密の関係</h3>
                <p>誰にも言えない二人だけの時間</p>
            </div>
            <div class="genre-card" onclick="selectGenre('transformation')">
                <div class="genre-icon">🦋</div>
                <h3>変化と覚醒</h3>
                <p>新しい自分との出会い</p>
            </div>
        </div>

        <!-- カスタマイズオプション -->
        <div class="customization">
            <h3 style="margin-bottom: 20px;">ストーリーをカスタマイズ</h3>
            
            <div class="slider-group">
                <div class="slider-label">
                    <span>強度</span>
                    <span id="intensityValue">5</span>
                </div>
                <input type="range" class="slider" id="intensity" min="1" max="10" value="5">
            </div>
            
            <div class="slider-group">
                <div class="slider-label">
                    <span>ストーリーの長さ</span>
                    <span id="lengthValue">4シーン</span>
                </div>
                <input type="range" class="slider" id="storyLength" min="3" max="8" value="4">
            </div>
            
            <div class="slider-group">
                <div class="slider-label">
                    <span>画像スタイル</span>
                    <span id="styleValue">アーティスティック</span>
                </div>
                <select id="imageStyle" style="width: 100%; padding: 10px; background: #444; color: white; border: none; border-radius: 5px;">
                    <option value="artistic">アーティスティック</option>
                    <option value="realistic">リアリスティック</option>
                    <option value="vintage">ヴィンテージ</option>
                    <option value="noir">ノワール</option>
                </select>
            </div>
        </div>

        <button class="generate-btn" onclick="generateStory()">ストーリーを生成</button>

        <!-- ローディング表示 -->
        <div class="loading" id="loading">
            <div class="loading-spinner"></div>
            <p>あなただけの物語を生成中...</p>
        </div>

        <!-- ストーリー表示エリア -->
        <div class="story-viewer" id="storyViewer"></div>
    </div>

    <script>
        let selectedGenre = null;

        // ストーリーテンプレート
        const storyTemplates = {
            forbidden: {
                title: "禁断の関係",
                scenes: [
                    {
                        text: "その出会いは偶然だった。雨の降る夜、避難した古い図書館で、私たちは運命的に出会った。",
                        mood: "mysterious",
                        imagePrompt: "dark library, rain, mysterious atmosphere"
                    },
                    {
                        text: "理性では分かっている。この感情は許されないものだと。しかし、心は別の答えを求めていた。",
                        mood: "conflicted",
                        imagePrompt: "emotional conflict, forbidden desire"
                    },
                    {
                        text: "月明かりの下、ついに私たちは一線を越えた。もう後戻りはできない。",
                        mood: "passionate",
                        imagePrompt: "moonlight, intimate moment"
                    },
                    {
                        text: "朝日が昇る。新しい一日の始まりは、私たちにとって新しい関係の始まりでもあった。",
                        mood: "hopeful",
                        imagePrompt: "sunrise, new beginning"
                    }
                ]
            },
            dominant: {
                title: "支配と服従",
                scenes: [
                    {
                        text: "契約書にサインをする手が震えていた。これから始まる新しい世界への期待と不安が入り混じる。",
                        mood: "anticipation",
                        imagePrompt: "contract signing, nervous anticipation"
                    },
                    {
                        text: "最初のレッスン。今まで知らなかった自分の一面が、少しずつ姿を現し始める。",
                        mood: "discovery",
                        imagePrompt: "first lesson, self-discovery"
                    },
                    {
                        text: "抵抗と受容の間で揺れ動く心。しかし、次第に新しい快楽の形を理解し始める。",
                        mood: "acceptance",
                        imagePrompt: "internal struggle, acceptance"
                    },
                    {
                        text: "完全な信頼関係の中で、真の自由を見つけた。支配と服従は、お互いを解放する鍵だった。",
                        mood: "liberation",
                        imagePrompt: "trust, liberation, freedom"
                    }
                ]
            }
        };

        // サンプル画像（実際はAPIから取得）
        const sampleImages = [
            "https://images.unsplash.com/photo-1516589178581-6cd7833ae3b2?w=800&q=80",
            "https://images.unsplash.com/photo-1519699047748-de8e457a634e?w=800&q=80",
            "https://images.unsplash.com/photo-1502716119720-b23a93e5fe1b?w=800&q=80",
            "https://images.unsplash.com/photo-1515191107209-c28698631303?w=800&q=80"
        ];

        // ジャンル選択
        function selectGenre(genre) {
            selectedGenre = genre;
            document.querySelectorAll('.genre-card').forEach(card => {
                card.classList.remove('selected');
            });
            event.target.closest('.genre-card').classList.add('selected');
        }

        // スライダー値の更新
        document.getElementById('intensity').oninput = function() {
            document.getElementById('intensityValue').textContent = this.value;
        };

        document.getElementById('storyLength').oninput = function() {
            document.getElementById('lengthValue').textContent = this.value + 'シーン';
        };

        // ストーリー生成
        async function generateStory() {
            if (!selectedGenre) {
                alert('ストーリージャンルを選択してください');
                return;
            }

            const loading = document.getElementById('loading');
            const viewer = document.getElementById('storyViewer');
            
            loading.classList.add('active');
            viewer.classList.remove('active');
            viewer.innerHTML = '';

            // 擬似的な遅延（実際はAPI呼び出し）
            await new Promise(resolve => setTimeout(resolve, 3000));

            const template = storyTemplates[selectedGenre] || storyTemplates.forbidden;
            const intensity = document.getElementById('intensity').value;
            const length = parseInt(document.getElementById('storyLength').value);

            // ストーリー表示
            viewer.innerHTML = `<h2 style="text-align: center; margin-bottom: 40px;">${template.title}</h2>`;

            for (let i = 0; i < Math.min(length, template.scenes.length); i++) {
                const scene = template.scenes[i];
                const sceneDiv = document.createElement('div');
                sceneDiv.className = 'scene';
                sceneDiv.style.animationDelay = `${i * 0.5}s`;
                
                // 実際はAI APIで画像生成
                const imageUrl = sampleImages[i % sampleImages.length];
                
                sceneDiv.innerHTML = `
                    <div class="scene-number">Scene ${i + 1}</div>
                    <img src="${imageUrl}" alt="Scene ${i + 1}" class="scene-image">
                    <div class="scene-text">${scene.text}</div>
                `;
                
                viewer.appendChild(sceneDiv);
            }

            loading.classList.remove('active');
            viewer.classList.add('active');
        }

        // 画像収集システム（バックエンド実装が必要）
        class ImageCollector {
            constructor() {
                this.sources = [
                    'unsplash',
                    'pexels',
                    'pixabay'
                ];
            }

            async collectImages(query, mood) {
                // 実際のAPIコール
                // const images = await fetch(`/api/collect-images?query=${query}&mood=${mood}`);
                // return images.json();
                
                // デモ用
                return sampleImages;
            }
        }

        // ストーリー自動生成AI（バックエンド実装が必要）
        class StoryAI {
            async generateText(genre, intensity, previousScenes) {
                // 実際のAI API（OpenAI等）呼び出し
                // const response = await fetch('/api/generate-story', {
                //     method: 'POST',
                //     body: JSON.stringify({ genre, intensity, previousScenes })
                // });
                // return response.json();
                
                // デモ用
                return "AI生成されたストーリーテキスト";
            }
        }
    </script>
</body>
</html>
// バックエンドで実装
const imageAPIs = {
    unsplash: 'https://api.unsplash.com/search/photos',
    pexels: 'https://api.pexels.com/v1/search',
    pixabay: 'https://pixabay.com/api/'
};

// 適切なフィルタリング
function filterAdultContent(images) {
    return images.filter(img => 
        img.tags.includes('artistic') && 
        !img.tags.includes('explicit')
    );
}
